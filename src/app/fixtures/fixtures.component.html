<div class="leagman">

	<div class="filterForm filterForm--fixtures">

		<div class="toolbar">
	  	<button *ngIf="filterData" (click)="toggleFilterForm()">filter</button>
  	</div>

    <app-league-select [selectedLeague]="leagueId" (leagueChanged)="onLeagueChange($event)"></app-league-select>
	  
		<div [@openClose]="isFilterOpen ? 'open' : 'closed'" class="open-close-container">

			<form *ngIf="filterData" [formGroup]="filterForm">

				<div class="formRow">
					<div class="formRow__label">Date</div>
					<div class="formRow__field">
						<select formControlName="date" class="formRow__field">
								<option *ngFor="let date of filterData.dates" [value]="date.datestamp">{{date.datestamp | date}}</option>
						</select>
					</div>
				</div>

				<div class="formRow">
					<div class="formRow__label">Division</div>
					<div class="formRow__field">
						<select formControlName="division">
								<option *ngFor="let division of filterData.divisions" [value]="division.nameLong">{{division.nameLong}}</option>
						</select>
					</div>
				</div>

				<div class="formRow">
					<div class="formRow__label">Club</div>
					<div class="formRow__field">
						<select formControlName="club">
								<option *ngFor="let club of filterData.clubs" [value]="club.name">{{club.name}}</option>
						</select>
					</div>
				</div>

				<ng-container *ngIf="clubSelected">

					<div class="formRow">
						<div class="formRow__label">Team</div>
	  				<div class="formRow__field">
	  					<select formControlName="team">
	  							<option *ngFor="let team of filterData.teams; let i = index" [value]="i">{{team[i]}}</option>
	  					</select>
	  				</div>
					</div>

					<div class="formRow">
						<div class="formRow__label">Home/Away</div>
	  				<div class="formRow__field">
	  					<ng-container *ngFor="let venue of filterData.homeAway; let i = index">
	    					<label class="formField--multiline">
	    					  <input type="radio" formControlName="homeAway" [value]="i">
	    					  {{venue}}
	    					</label>
	  					</ng-container>
	  				</div>
					</div>

				</ng-container>

				<div class="formRow">
					<div class="formRow__label">Games</div>
					<div class="formRow__field">
						<ng-container *ngFor="let status of filterData.statuses; let i = index">
	  					<label class="formField--multiline">
	  					  <input type="radio" formControlName="status" [value]="i">
	  					  {{status}}
	  					</label>
						</ng-container>
					</div>
				</div>

				<div class="formRow">
					<div class="formRow__label">Venues</div>
					<div class="formRow__field">
						<select formControlName="venueName">
								<option *ngFor="let venue of filterData.venues" [value]="venue.name">{{venue.name}}</option>
						</select>
					</div>
				</div>

			</form>

		</div>

	</div>

  <div *ngFor="let division of fixturesData" class="data">

    <ng-container *ngIf="division.fixtures.length != 0">

			<div class="title title--subline">{{division.name}}</div>
			<!--
			<div class="tables__notes">Last updated on {{league.updated_on}}</div>
			-->

			<div class="fixtures">

				<!-- //TODO is this needed
				<div class="fixtures__row fixtures__row--heading">
					<div class="fixtures__row--date">Date</div>
					<div class="fixtures__row--time">Time</div>
					<div class="fixtures__row--homeTeam">Home</div>
					<div class="fixtures__row--homeScore">.</div>
					<div class="fixtures__row--result">.</div>
					<div class="fixtures__row--awayScore">.</div>
					<div class="fixtures__row--awayTeam">Away</div>
					<div class="fixtures__row--venue">Venue</div>
				</div>
				-->

				<ng-container *ngFor="let fixture of division.fixtures" class="fixtures__row">
				  <div class="fixtures__row">
						<div class="fixtures__row--date">{{fixture.datestamp | date}}</div>
						<div class="fixtures__row--time">{{fixture.time}}</div>
						<div class="fixtures__row--homeTeam">{{fixture.homeTeam}}</div>
						<div class="fixtures__row--homeScore">{{fixture.isPostponed ? 'P' : fixture.homeScore}}</div>
						<div class="fixtures__row--result">-</div>
						<div class="fixtures__row--awayScore">{{fixture.isPostponed ? 'P' : fixture.awayScore}}</div>
						<div class="fixtures__row--awayTeam">{{fixture.awayTeam}}</div>
						<div class="fixtures__row--venue">{{fixture.venueName}}</div>
						<div *ngIf="fixture.notes" class="fixtures__row--notes">
						  Notes: {{fixture.notes}}
						</div>
						<div *ngIf="fixture.postponedText" class="fixtures__row--postponedText">
						  Postponed: {{fixture.postponedText}}
						</div>
					</div>
				</ng-container>

			</div>

    </ng-container>

  </div>

</div>
